# مدیریت و بررسی استفاده از حافظه (RAM) در سیستم‌های یونیکس و لینوکس

## مشاهده استفاده از حافظه

### `free`
دستور `free` اطلاعاتی درباره میزان استفاده از حافظه فیزیکی (RAM) و swap می‌دهد.
- `free -h`: نمایش اطلاعات حافظه به صورت خوانا برای انسان (human-readable).

### `top` و `htop`
این ابزارها علاوه بر نمایش پروسس‌ها، میزان استفاده از RAM توسط هر پروسس و کل سیستم را نیز نشان می‌دهند.
- `top`: دستور بلادرنگ برای مشاهده پروسس‌ها و استفاده از منابع.
- `htop`: نسخه‌ای گرافیکی‌تر و پیشرفته‌تر از `top`.

### `vmstat`
این دستور اطلاعاتی در مورد حافظه، CPU، و I/O سیستم به دست می‌دهد.
- `vmstat`: نمایش خلاصه‌ای از وضعیت سیستم شامل حافظه.

### `smem`
ابزاری برای نمایش استفاده از حافظه توسط پروسس‌ها.
- `smem`: نمایش استفاده از حافظه توسط پروسس‌ها با جزئیات بیشتر نسبت به `ps` و `top`.

### `cat /proc/meminfo`
فایل `meminfo` اطلاعات دقیق و جزئی درباره وضعیت حافظه سیستم را ارائه می‌دهد.
- `cat /proc/meminfo`: مشاهده جزئیات حافظه سیستم شامل کل حافظه، حافظه آزاد، بافرها و کش‌ها.

## مدیریت حافظه Swap

### `swapon` و `swapoff`
این دستورات برای فعال کردن یا غیرفعال کردن فضای swap استفاده می‌شوند.
- `swapon <فایل یا پارتیشن swap>`: فعال کردن فضای swap.
- `swapoff <فایل یا پارتیشن swap>`: غیرفعال کردن فضای swap.

### `mkswap` و `swaplabel`
برای ایجاد و مدیریت فضای swap.
- `mkswap <فایل یا پارتیشن>`: فرمت کردن فایل یا پارتیشن به عنوان swap.
- `swaplabel -L <label> <فایل یا پارتیشن>`: اختصاص دادن یک برچسب به فضای swap.

## بهینه‌سازی استفاده از حافظه

### `sysctl` و `/proc/sys`
پارامترهای کرنل که می‌توانند برای مدیریت استفاده از حافظه تنظیم شوند.
- `sysctl -w vm.swappiness=<value>`: تنظیم مقدار `swappiness` برای کنترل استفاده از swap.
- `cat /proc/sys/vm/swappiness`: مشاهده مقدار فعلی `swappiness`.

- ### استفاده از ابزارهای مانیتورینگ
ابزارهای پیشرفته‌تری مانند `nmon`, `glances`، و `atop` نیز برای مانیتورینگ جامع‌تر سیستم از جمله استفاده از حافظه مفید هستند.

این دستورات و ابزارها به شما کمک می‌کنند تا وضعیت حافظه سیستم را مشاهده و مدیریت کنید. همچنین در بهینه‌سازی عملکرد سیستم و جلوگیری از مشکلات ناشی از استفاده بیش از حد از منابع حافظه مؤثر هستند.









# پاک کردن کش حافظه (RAM) در لینوکس

در سیستم‌های لینوکسی، می‌توان کش حافظه را برای آزادسازی حافظه اشغال شده پاک کرد. این کار معمولاً به سطح دسترسی ریشه (root) نیاز دارد و باید با احتیاط انجام شود.
```bash
root@server1# free -h
total        used        free      shared  **buff/cache**  available
1.9Gi       538Mi       149Mi       7.0Mi     **1.3Gi**      1.2Gi
```


## مشاهده استفاده فعلی از کش حافظه

قبل از پاک کردن کش، می‌توانید میزان استفاده فعلی از حافظه کش را بررسی کنید:
```bash
free -h
```
یا:

```bash
cat /proc/meminfo | grep -i "cached"
```

## پاک کردن کش حافظه
برای پاک کردن کش حافظه، می‌توانید از دستور زیر استفاده کنید:

```bash
sudo sync; sudo sysctl -w vm.drop_caches=3
```

این دستور شامل دو بخش است:

دستور sync: اطمینان از نوشتن تمام داده‌های دیسک در حافظه به دیسک‌های فیزیکی.
دستور sysctl -w vm.drop_caches=3: این دستور به کرنل می‌گوید که صفحات کش، بافرها و کش‌های inode و dentry را آزاد کند. عدد 3 به معنای آزاد کردن تمام انواع کش‌ها است.
توجه: این عمل ممکن است باعث کاهش موقت عملکرد سیستم شود، زیرا داده‌های ذخیره‌شده در کش‌ها حذف می‌شوند و باید دوباره از دیسک بارگیری شوند.


