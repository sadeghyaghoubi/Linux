
# دستور `expr` در لینوکس

دستور `expr` در لینوکس برای ارزیابی عبارات و انجام محاسبات ساده ریاضی و منطقی استفاده می‌شود. این دستور می‌تواند عملیات‌هایی مانند جمع، تفریق، ضرب، تقسیم، و همچنین مقایسه مقادیر و دستکاری رشته‌ها را انجام دهد.

## مثال‌های استفاده از دستور `expr`

1. **جمع اعداد:**
   ```
   expr 5 + 3
   ```
   خروجی: `8`

2. **تفریق اعداد:**
   ```
   expr 10 - 2
   ```
   خروجی: `8`

3. **ضرب اعداد:**
   ```
   expr 4 \* 3
   ```
   توجه کنید که برای جلوگیری از تفسیر کاراکتر `*` به عنوان یک کاراکتر خاص توسط شل، باید از کاراکتر `\` برای اسکیپ کردن آن استفاده کنید.

   خروجی: `12`

4. **تقسیم اعداد:**
   ```
   expr 20 / 4
   ```
   خروجی: `5`

5. **مقایسه اعداد:**
   ```
   expr 5 \> 3
   ```
   خروجی: `1` (عدد 1 به معنای درست بودن شرط است)

   ```
   expr 5 = 5
   ```
   خروجی: `1`

   ```
   expr 5 = 3
   ```
   خروجی: `0` (عدد 0 به معنای نادرست بودن شرط است)

6. **محاسبات با متغیرها:**
   ```
   a=5
   b=3
   expr $a + $b
   ```
   خروجی: `8`

7. **طول یک رشته:**
   ```
   expr length "Hello, World!"
   ```
   خروجی: `13`

8. **استخراج زیربرنامه از یک رشته:**
   ```
   expr substr "Hello, World!" 8 5
   ```
   این دستور از موقعیت 8 شروع کرده و 5 کاراکتر بعدی را استخراج می‌کند.

   خروجی: `World`

## نکات مهم

- هنگام استفاده از عملگرها باید فاصله‌ی بین آن‌ها و اعداد رعایت شود.
- برای جلوگیری از تفسیر خاص برخی از کاراکترها مانند `*`, `+`, `<`, `>`, `(`, `)` توسط شل، می‌توانید از علامت `\` برای اسکیپ کردن آن‌ها استفاده کنید.
- در برخی موارد بهتر است از پرانتزهای دوتایی `$(())` برای ارزیابی عبارات ریاضی به جای `expr` استفاده کنید، زیرا خواناتر و کاربردی‌تر است.

---

# تفاوت `expr` و `$[]` در لینوکس

## 1. نحوه استفاده و نحو

- **`expr`:**
  - `expr` به عنوان یک دستور مستقل اجرا می‌شود و به فضای بین عناصر حساس است.
  - برای محاسباتی مانند ضرب، نیاز به اسکیپ کردن علامت‌ها با `\` دارد.
  - مثال:
    ```bash
    expr 5 + 3
    expr 4 \* 2
    ```

- **`$[]`:**
  - `$[]` یک فرم کوتاه شده از `$(( ... ))` است که برای ارزیابی عبارات عددی در شل استفاده می‌شود.
  - نیازی به فضای بین عناصر ندارد و علامت‌ها نیازی به اسکیپ کردن ندارند.
  - از سینتکس ریاضی معمولی استفاده می‌کند.
  - مثال:
    ```bash
    echo $((5 + 3))
    echo $((4 * 2))
    ```

## 2. سازگاری با شل‌های مختلف

- **`expr`:**
  - یک ابزار خارجی است که با اکثر شل‌های یونیکس و لینوکس سازگار است.
  - ممکن است در برخی سیستم‌ها نصب نباشد یا نسخه‌های متفاوتی داشته باشد که باعث تغییراتی در رفتار آن می‌شود.

- **`$[]` و `$(( ... ))`:**
  - بخشی از شل اسکریپت است و به عنوان یک عملیات داخلی (builtin) در بسیاری از شل‌ها مانند `bash`، `ksh`، `zsh` پشتیبانی می‌شود.
  - به طور گسترده در اسکریپت‌های شل استفاده می‌شود و معمولاً از نظر سازگاری ترجیح داده می‌شود.

## 3. ویژگی‌ها و قابلیت‌ها

- **`expr`:**
  - علاوه بر محاسبات ریاضی، قابلیت‌های دیگری مانند مقایسه رشته‌ها، بررسی طول رشته‌ها، و استخراج زیربرنامه‌ها را دارد.
  - معمولاً خروجی را در قالب عدد یا رشته ارائه می‌دهد و برای استفاده در متغیرها یا محاسبات بیشتر نیاز به ارزیابی دوباره دارد.

- **`$[]` و `$(( ... ))`:**
  - عمدتاً برای انجام محاسبات عددی به کار می‌روند و به راحتی با دیگر اجزای اسکریپت شل ادغام می‌شوند.
  - قابلیت مدیریت متغیرها و محاسبات پیچیده‌تر را دارند.

## انتخاب بین این دو
- برای محاسبات ساده و مستقیم ریاضی در اسکریپت‌های شل، استفاده از `$[]` یا `$(( ... ))` توصیه می‌شود به دلیل ساده‌تر بودن و خوانایی بالاتر.
- اگر نیاز به انجام عملیات‌هایی مانند مقایسه رشته‌ها، بررسی طول رشته‌ها، یا استخراج زیربرنامه‌ها دارید، `expr` می‌تواند گزینه مناسبی باشد، اما برای عملیات‌های پیشرفته‌تر یا پشتیبانی بهتر از مقیاس‌های پیچیده، ابزارهای دیگری مانند `awk` یا `sed` توصیه می‌شوند.
